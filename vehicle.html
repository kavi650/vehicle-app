<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WheelDeal - Second Hand Vehicle Marketplace</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        /* --- CSS STYLES --- */
        :root {
            --primary: #2C3E50; /* Dark Blue */
            --secondary: #E74C3C; /* Red */
            --accent: #3498DB; /* Blue */
            --success: #27AE60; /* Green */
            --light: #ECF0F1;
            --dark: #2C3E50;
            --white: #ffffff;
            --booked: #F39C12; /* Orange for booked */
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f4f7f6;
            color: var(--dark);
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* --- AUTH SCREEN --- */
        #auth-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary), var(--dark));
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .login-box {
            background: var(--white);
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 15px 30px rgba(0,0,0,0.2);
            width: 350px;
            text-align: center;
        }

        .login-box h2 {
            margin-bottom: 20px;
            color: var(--primary);
        }

        .form-group {
            margin-bottom: 15px;
            text-align: left;
        }

        .form-group label {
            font-size: 0.9rem;
            color: #666;
        }

        .form-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-top: 5px;
        }

        .btn {
            display: inline-block;
            background: var(--primary);
            color: var(--white);
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
            font-size: 1rem;
            transition: 0.3s;
        }

        .btn:hover { background: #1a252f; }
        .btn-secondary { background: var(--secondary); }
        .btn-secondary:hover { background: #c0392b; }
        .btn-outline { background: transparent; border: 1px solid var(--primary); color: var(--primary); }
        .btn-outline:hover { background: var(--primary); color: white; }

        /* --- APP STRUCTURE --- */
        #app-container {
            display: none; /* Hidden until login */
            flex-direction: column;
            height: 100%;
        }

        /* Navbar */
        nav {
            background: var(--primary);
            color: var(--white);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .nav-brand { font-size: 1.5rem; font-weight: bold; }
        .nav-menu button {
            background: none;
            border: none;
            color: rgba(255,255,255,0.8);
            margin-left: 20px;
            font-size: 1rem;
            cursor: pointer;
        }
        .nav-menu button:hover, .nav-menu button.active {
            color: var(--white);
            border-bottom: 2px solid var(--secondary);
        }

        /* Main Content Area */
        main {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        .section { display: none; }
        .section.active { display: block; animation: fadeIn 0.3s; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- CARDS (BUY SECTION) --- */
        .listing-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .card {
            background: var(--white);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
            position: relative;
        }

        .card-img-placeholder {
            height: 180px;
            background: #bdc3c7;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #7f8c8d;
            font-size: 3rem;
        }

        .card-body { padding: 15px; }
        .card-title { font-size: 1.2rem; font-weight: bold; margin-bottom: 5px; }
        .card-price { font-size: 1.1rem; color: var(--secondary); font-weight: bold; }
        .card-meta { font-size: 0.9rem; color: #7f8c8d; margin: 10px 0; display: flex; justify-content: space-between; }
        
        .status-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 5px 10px;
            border-radius: 20px;
            color: white;
            font-size: 0.8rem;
            font-weight: bold;
            text-transform: uppercase;
        }
        .bg-sale { background: var(--success); }
        .bg-booked { background: var(--booked); }
        .bg-sold { background: var(--secondary); }

        /* --- CHAT --- */
        .chat-container {
            border: 1px solid #ddd;
            border-radius: 8px;
            background: white;
            height: 500px;
            display: flex;
            flex-direction: column;
        }
        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #f9f9f9;
        }
        .message {
            margin-bottom: 15px;
            padding: 10px 15px;
            border-radius: 20px;
            max-width: 70%;
            font-size: 0.9rem;
        }
        .msg-in { background: #e0e0e0; align-self: flex-start; }
        .msg-out { background: var(--accent); color: white; margin-left: auto; }
        .chat-input-area {
            padding: 15px;
            border-top: 1px solid #ddd;
            display: flex;
            gap: 10px;
        }

        /* --- ADMIN TABLE --- */
        .admin-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .admin-table th, .admin-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        .admin-table th { background: var(--primary); color: white; }

        /* Utility */
        .hidden { display: none !important; }
        .alert { padding: 10px; border-radius: 5px; margin-bottom: 15px; font-size: 0.9rem; }
        .alert-info { background: #d1ecf1; color: #0c5460; }
    </style>
</head>
<body>

    <div id="auth-screen">
        <div class="login-box">
            <h2><i class="fas fa-car-side"></i> WheelDeal</h2>
            <p style="margin-bottom: 20px; color: #777;">Login to Buy or Sell</p>
            
            <div class="form-group">
                <input type="text" id="username" placeholder="Username">
            </div>
            <div class="form-group">
                <input type="password" id="password" placeholder="Password">
            </div>
            <button class="btn" onclick="login()">Login</button>
            
            <div style="margin-top: 20px; font-size: 0.8rem; text-align: left; background: #f8f9fa; padding: 10px; border-radius: 5px;">
                <strong>Demo Credentials:</strong><br>
                User: <code>user</code> | Pass: <code>123</code><br>
                Admin: <code>admin</code> | Pass: <code>admin</code>
            </div>
        </div>
    </div>

    <div id="app-container">
        
        <nav>
            <div class="nav-brand"><i class="fas fa-steering-wheel"></i> WheelDeal</div>
            <div class="nav-menu" id="nav-links">
                </div>
        </nav>

        <main>
            <div id="view-buy" class="section active">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                    <h2>Vehicle Listings</h2>
                    <input type="text" id="search-bar" placeholder="Search bikes, cars..." onkeyup="renderListings()" style="padding:8px; width:250px;">
                </div>
                <div class="listing-grid" id="listings-wrapper">
                    </div>
            </div>

            <div id="view-sell" class="section">
                <h2>Sell Your Vehicle</h2>
                <div class="card" style="max-width: 600px; margin: 20px auto; padding: 20px;">
                    <form onsubmit="handleSell(event)">
                        <div class="form-group">
                            <label>Product Title</label>
                            <input type="text" id="sell-title" required placeholder="e.g. 2018 Swift Dzire">
                        </div>
                        <div class="form-group">
                            <label>Price (₹)</label>
                            <input type="number" id="sell-price" required placeholder="e.g. 450000">
                        </div>
                        <div class="form-group">
                            <label>Location</label>
                            <input type="text" id="sell-loc" required placeholder="e.g. Mumbai">
                        </div>
                        <div class="form-group">
                            <label>Category</label>
                            <select id="sell-cat" style="width:100%; padding:10px; margin-top:5px;">
                                <option value="Car">Car</option>
                                <option value="Bike">Bike</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Description</label>
                            <textarea id="sell-desc" rows="3" style="width:100%; padding:10px; margin-top:5px;" placeholder="Details about condition..."></textarea>
                        </div>
                        <button type="submit" class="btn">Post Ad</button>
                    </form>
                </div>
            </div>

            <div id="view-chat" class="section">
                <h2>Messages</h2>
                <div class="chat-container">
                    <div class="chat-messages" id="chat-box">
                        <div class="message msg-in">Is the Royal Enfield still available?</div>
                        <div class="message msg-out">Yes, it is available.</div>
                    </div>
                    <div class="chat-input-area">
                        <input type="text" id="msg-input" placeholder="Type a message..." style="flex:1; padding:10px;">
                        <button class="btn" style="width:auto;" onclick="sendMsg()">Send</button>
                    </div>
                </div>
            </div>

            <div id="view-admin" class="section">
                <h2>Admin Dashboard</h2>
                
                <div style="display:grid; grid-template-columns: repeat(3, 1fr); gap:20px; margin: 20px 0;">
                    <div class="card" style="padding:20px; text-align:center; background:#dff9fb;">
                        <h3>Total Ads</h3>
                        <h1 id="stat-ads">0</h1>
                    </div>
                    <div class="card" style="padding:20px; text-align:center; background:#f1f2f6;">
                        <h3>Revenue (Advance)</h3>
                        <h1 id="stat-rev">₹0</h1>
                    </div>
                </div>

                <h3>Pending Approvals</h3>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Title</th>
                            <th>User</th>
                            <th>Price</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="admin-rows">
                        </tbody>
                </table>
                
                <h3 style="margin-top:30px;">User Management</h3>
                <div class="card" style="padding:15px; margin-top:10px;">
                    <p><strong>fake_user_123</strong> - Reported for spam <button class="btn btn-secondary" style="width:auto; padding:5px 10px; font-size:0.8rem; margin-left:10px;">Block User</button></p>
                </div>
            </div>
            
            <div id="view-profile" class="section">
                <h2>My Profile</h2>
                <div class="card" style="padding:20px; max-width:500px;">
                    <p><i class="fas fa-user"></i> <strong>Name:</strong> <span id="p-name">User</span></p>
                    <p><i class="fas fa-envelope"></i> <strong>Email:</strong> user@example.com</p>
                    <button class="btn btn-secondary" style="margin-top:20px;" onclick="location.reload()">Logout</button>
                </div>
            </div>

        </main>
    </div>

    <script>
        /* --- MOCK DATA STORE --- */
        let currentUser = null; // 'user' or 'admin'
        let revenue = 1500; // Mock revenue

        let listings = [
            { id: 101, title: "Royal Enfield Classic 350", price: 140000, loc: "Delhi", cat: "Bike", status: "sale", seller: "Amit", approved: true },
            { id: 102, title: "Hyundai i20 Asta", price: 550000, loc: "Mumbai", cat: "Car", status: "booked", seller: "Sara", approved: true },
            { id: 103, title: "Honda Activa 6G", price: 65000, loc: "Pune", cat: "Bike", status: "sale", seller: "Raj", approved: true },
            { id: 104, title: "Maruti Swift 2015", price: 320000, loc: "Chennai", cat: "Car", status: "sold", seller: "Dev", approved: true },
            { id: 105, title: "KTM Duke 200", price: 110000, loc: "Bangalore", cat: "Bike", status: "sale", seller: "You", approved: false } // Pending
        ];

        /* --- AUTHENTICATION --- */
        function login() {
            const u = document.getElementById('username').value;
            const p = document.getElementById('password').value;

            if (u === 'admin' && p === 'admin') {
                currentUser = 'admin';
                initApp();
            } else if (u === 'user' && p === '123') {
                currentUser = 'user';
                initApp();
            } else {
                alert("Invalid Username or Password!");
            }
        }

        function initApp() {
            document.getElementById('auth-screen').style.display = 'none';
            document.getElementById('app-container').style.display = 'flex';
            setupNav();
            
            if(currentUser === 'admin') {
                renderAdmin();
                switchView('view-admin');
            } else {
                renderListings();
                switchView('view-buy');
            }
        }

        /* --- NAVIGATION --- */
        function setupNav() {
            const nav = document.getElementById('nav-links');
            nav.innerHTML = '';

            if (currentUser === 'user') {
                nav.innerHTML = `
                    <button onclick="switchView('view-buy')">Buy</button>
                    <button onclick="switchView('view-sell')">Sell</button>
                    <button onclick="switchView('view-chat')">Chat</button>
                    <button onclick="switchView('view-profile')">Profile</button>
                `;
            } else {
                nav.innerHTML = `
                    <button onclick="switchView('view-admin')">Dashboard</button>
                    <button onclick="location.reload()">Logout</button>
                `;
            }
        }

        function switchView(viewId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(el => el.classList.remove('active'));
            // Show selected
            document.getElementById(viewId).classList.add('active');
            
            // Re-render data if needed
            if(viewId === 'view-buy') renderListings();
            if(viewId === 'view-admin') renderAdmin();
        }

        /* --- BUY LOGIC --- */
        function renderListings() {
            const container = document.getElementById('listings-wrapper');
            const search = document.getElementById('search-bar').value.toLowerCase();
            container.innerHTML = '';

            listings.forEach(item => {
                // Filter: Must be approved, match search, and if user is viewing, hide unapproved
                if (!item.approved) return; 
                if (search && !item.title.toLowerCase().includes(search)) return;

                let statusClass = item.status === 'sale' ? 'bg-sale' : (item.status === 'booked' ? 'bg-booked' : 'bg-sold');
                let statusText = item.status === 'sale' ? 'For Sale' : (item.status === 'booked' ? 'Booked' : 'Sold');
                
                let btnHtml = '';
                if (item.status === 'sale') {
                    btnHtml = `<button class="btn" onclick="bookItem(${item.id})">Book Now (₹1500)</button>`;
                } else {
                    btnHtml = `<button class="btn" disabled style="background:#ccc; cursor:not-allowed;">${statusText}</button>`;
                }

                const cardHtml = `
                    <div class="card">
                        <span class="status-badge ${statusClass}">${statusText}</span>
                        <div class="card-img-placeholder"><i class="fas fa-car"></i></div>
                        <div class="card-body">
                            <div class="card-title">${item.title}</div>
                            <div class="card-price">₹${item.price.toLocaleString()}</div>
                            <div class="card-meta">
                                <span><i class="fas fa-map-marker-alt"></i> ${item.loc}</span>
                                <span><i class="fas fa-user"></i> ${item.seller}</span>
                            </div>
                            ${btnHtml}
                            <button class="btn btn-outline" style="margin-top:10px; font-size:0.8rem;" onclick="switchView('view-chat')">Contact Seller</button>
                        </div>
                    </div>
                `;
                container.innerHTML += cardHtml;
            });
        }

        function bookItem(id) {
            if(confirm("Confirm booking? You need to pay ₹1500 advance.")) {
                const item = listings.find(i => i.id === id);
                item.status = 'booked';
                revenue += 1500;
                alert("Booking Successful! The seller has been notified.");
                renderListings();
            }
        }

        /* --- SELL LOGIC --- */
        function handleSell(e) {
            e.preventDefault();
            const title = document.getElementById('sell-title').value;
            const price = document.getElementById('sell-price').value;
            const loc = document.getElementById('sell-loc').value;
            const cat = document.getElementById('sell-cat').value;

            const newItem = {
                id: Date.now(),
                title: title,
                price: parseInt(price),
                loc: loc,
                cat: cat,
                status: 'sale',
                seller: 'You',
                approved: false // Needs admin approval
            };

            listings.push(newItem);
            alert("Ad Posted! It is pending Admin Approval.");
            e.target.reset();
            switchView('view-buy');
        }

        /* --- CHAT LOGIC --- */
        function sendMsg() {
            const input = document.getElementById('msg-input');
            const box = document.getElementById('chat-box');
            if(input.value.trim()) {
                // Add user message
                box.innerHTML += `<div class="message msg-out">${input.value}</div>`;
                input.value = '';
                
                // Auto scroll
                box.scrollTop = box.scrollHeight;

                // Mock reply
                setTimeout(() => {
                    box.innerHTML += `<div class="message msg-in">Okay, let me check and get back to you.</div>`;
                    box.scrollTop = box.scrollHeight;
                }, 1500);
            }
        }

        /* --- ADMIN LOGIC --- */
        function renderAdmin() {
            const tbody = document.getElementById('admin-rows');
            tbody.innerHTML = '';
            
            document.getElementById('stat-ads').innerText = listings.length;
            document.getElementById('stat-rev').innerText = "₹" + revenue.toLocaleString();

            listings.forEach(item => {
                const actionBtns = !item.approved 
                    ? `<button class="btn" style="padding:5px 10px; width:auto; font-size:0.8rem;" onclick="approve(${item.id})">Approve</button> 
                       <button class="btn btn-secondary" style="padding:5px 10px; width:auto; font-size:0.8rem;" onclick="reject(${item.id})">Reject</button>`
                    : `<span style="color:green; font-weight:bold;">Live</span>`;

                const row = `
                    <tr>
                        <td>#${item.id}</td>
                        <td>${item.title} <br><small>${item.cat}</small></td>
                        <td>${item.seller}</td>
                        <td>₹${item.price}</td>
                        <td>${actionBtns}</td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        function approve(id) {
            const item = listings.find(i => i.id === id);
            item.approved = true;
            renderAdmin();
        }

        function reject(id) {
            listings = listings.filter(i => i.id !== id); // Remove item
            renderAdmin();
        }
    </script>
</body>
</html>